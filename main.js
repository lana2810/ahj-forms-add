(()=>{"use strict";const e=[{id:1,name:"iPhone XR",price:6e4},{id:2,name:"Sumsung Galaxy S10+",price:8e4},{id:3,name:"Huawei View",price:5e4}];function t(e,t){let n;switch(e){case"isRequired":n=""===t.trim();break;case"isNumber":n=!/^\d+$/.test(t)}return n}function n(e,t){const n=e.closest(".form-control");n.querySelector(".tooltip")&&n.querySelector(".tooltip").remove();const r=document.createElement("span");r.textContent=t,r.classList.add("tooltip"),n.append(r),e.classList.add("error")}const r="IdItem",o=new class{constructor(e){this.data=e}render(){const e=document.querySelector(".table-body");e.innerHTML="",this.data.map((t=>{const{name:n,price:r}=t,o=document.createElement("tr"),c=document.createElement("td");c.classList.add("name-item"),c.textContent=n,o.append(c);const i=document.createElement("td");i.textContent=r,o.append(i);const a=document.createElement("td");a.classList.add("icon"),a.classList.add("icon-edit"),a.textContent=String.fromCodePoint(9998),o.append(a);const d=document.createElement("td");return d.classList.add("icon"),d.classList.add("icon-remove"),d.textContent=String.fromCodePoint(10006),o.append(d),e.prepend(o),o}))}add(e){this.data.push(e),this.render()}remove(e){this.data=this.data.filter((t=>t.name!==e)),this.render()}edit(e,t){const n={id:e,name:t.name,price:+t.price};this.data=this.data.map((t=>t.id===e?n:t)),this.render()}}(e);o.render();const c=document.querySelector(".add"),i=document.querySelector(".confirm"),a=document.querySelector(".cancel"),d=document.querySelector("form"),s=document.querySelector(".table-body"),l="Поле должно быть заполнено",m=e=>{let{name:t,price:n}=e;d.querySelector(".tooltip")&&d.querySelector(".tooltip").remove(),d.querySelectorAll("input").forEach((e=>e.classList.remove("error"))),d.classList.remove("hidden");const r=document.querySelector("#name"),o=document.querySelector("#price");r.value=t,o.value=n};c.addEventListener("click",(e=>{e.preventDefault(),m({name:"",price:""})})),s.addEventListener("click",(t=>{let{target:n}=t;if(n.classList.contains("icon-edit")){const t=n.closest("tr").querySelector("td.name-item").textContent,o=e.find((e=>e.name===t));localStorage.setItem(r,o.id),m(o)}if(n.classList.contains("icon-remove")){const e=n.closest("tr").querySelector("td.name-item").textContent;o.remove(e)}})),i.addEventListener("click",(e=>{e.preventDefault();const c=document.querySelector("#name"),i=document.querySelector("#price");if(t("isRequired",c.value))return void n(c,l);if(t("isRequired",i.value))return void n(i,l);if(t("isRequired",i.value))return void n(i,l);if(t("isNumber",i.value))return void n(i,"Значение должно быть числом");const a={};if(a.name=c.value,a.price=i.value,localStorage.getItem(r)){const e=+localStorage.getItem(r);localStorage.removeItem(r),d.classList.add("hidden"),o.edit(e,a)}else a.id=Date.now(),d.classList.add("hidden"),o.add(a)})),a.addEventListener("click",(e=>{e.preventDefault(),d.reset(),d.classList.add("hidden")}))})();